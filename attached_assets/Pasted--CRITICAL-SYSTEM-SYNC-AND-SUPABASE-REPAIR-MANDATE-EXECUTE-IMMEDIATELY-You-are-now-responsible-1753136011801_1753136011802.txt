üö® CRITICAL SYSTEM SYNC AND SUPABASE REPAIR MANDATE ‚Äî EXECUTE IMMEDIATELY

You are now responsible for auditing and resolving **all Supabase-related issues** across the stack for the GTT Protocol deployment.

‚úÖ SYSTEM OVERVIEW:
- Supabase is used for:
  ‚Ä¢ User authentication (email/password or social)
  ‚Ä¢ Tier-based access (Free, Basic, Pro, Enterprise)
  ‚Ä¢ Capsule ownership records
  ‚Ä¢ Reward/yield tracking per user
  ‚Ä¢ GTT transaction tracking (if stored off-chain)
- Other vendors in the stack include: QuickNode (Web3 RPC), Stripe (payments), Vercel/Replit (deployment), GitHub (CI/CD)

---

üõ†Ô∏è YOUR RESPONSIBILITIES (Supabase Focused):

1. ‚úÖ **AUTH FIX & TIER VALIDATION**
   - Check `auth.users` and ensure metadata includes assigned tier (`free`, `basic`, etc.)
   - Validate users have correct tier-to-service mapping
   - Add seed users for test validation if needed
   - Ensure email confirmation and password reset work end to end

2. ‚úÖ **SQL TABLE VALIDATION & FIXES**
   - Inspect and repair any broken or orphaned rows in:
     ‚Ä¢ `capsules`
     ‚Ä¢ `capsule_rewards`
     ‚Ä¢ `user_profiles`
     ‚Ä¢ `transaction_history`
     ‚Ä¢ Any custom GTT-yield or staking table
   - Make sure foreign keys match actual user IDs
   - Clear all dummy/malformed data unless explicitly flagged

3. ‚úÖ **SUPABASE STORAGE & API HEALTH**
   - Check that all storage buckets (logos, video assets, etc.) are reachable
   - Validate that Supabase API responses match expected client structures

4. ‚úÖ **REAL-TIME SUBSCRIPTIONS**
   - Ensure all real-time subscriptions (capsule updates, tier changes, etc.) are working
   - Reconnect or reset any broken RLS (Row Level Security) policies that block valid reads/writes

5. ‚úÖ **FULL STACK SYNC**
   - Supabase state must match live front-end views and Web3 reads
   - Ensure Replit/QuickNode/Stripe/Frontend are operating on consistent GTT account metadata

---

üéØ END GOAL:
- The Supabase instance should be fully operational, consistent, and aligned with the promises made in user UI, pricing, and whitepaper documents.
- All tables clean, auth restored, and live connections working.
- All vendors must be in sync. If any vendor (QuickNode, Supabase, Stripe) is misconfigured or down, highlight and fail the health check.
- System must be stable enough to onboard real paying users **without legal or financial exposure**.

‚è±Ô∏è Timeframe: This must be executed and resolved in the **next 1 hour**. Report each fix and if external input is required.

Begin now. Output SQL fixes, patch code, and test output as you proceed.
