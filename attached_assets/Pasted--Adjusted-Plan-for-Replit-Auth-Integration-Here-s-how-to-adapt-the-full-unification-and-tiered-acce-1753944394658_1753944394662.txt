âœ… Adjusted Plan for Replit Auth Integration
Hereâ€™s how to adapt the full unification and tiered access structure specifically for Replit Auth:

âœ… REPLIT AUTH PROMPT FOR UNIFIED AUTH + ACCESS + UX
txt
Copy
Edit
ğŸ§  CONTEXT:
This is a Replit app using Replitâ€™s native authentication system. All login/signup/auth must route through Replit Auth APIs and `@replit/extensions`/`@replit/auth`.

ğŸ“ GOAL:
Eliminate duplicate auth entry points. Merge all auth, tier recognition, profile, and upgrade access into one logic layer. All feature access and visibility must reflect Replit Auth role or metadata.

---

âœ… STEP 1: AUTH ENTRY UNIFICATION

- Create one centralized login entry point (e.g. `/login.tsx`)
- Replace all scattered `login`, `signup`, `profile`, `enter`, `start` pages or links with a **single shared auth button** and redirect logic
- Use `@replit/extensions` or `@replit/auth` APIs to retrieve logged-in user metadata
- Attach tier level to user via:
  â€¢ `user?.metadata?.tier` or
  â€¢ Replit secrets / KV store lookup
  â€¢ Default fallback: `guest`

---

âœ… STEP 2: ACCESS CONTROL PER TIER

```ts
const accessMap = {
  guest: [\"vault\", \"view-only\"],
  pro: [\"veritas\", \"create\", \"mint\", \"view-dashboard\"],
  admin: [\"everything\"]
};
Create a global checkAccess(route: string, role: string): boolean function

Before rendering gated pages, run access check

If user not allowed, redirect them to /upgrade or show CTA modal with â€œUpgrade to accessâ€

âœ… STEP 3: DYNAMIC NAVIGATION & REDIRECTION

Navigation must render only links that user tier allows

Profile dropdown must show:
â€¢ â€œMy Tier: PROâ€ or â€œGUESTâ€
â€¢ Billing & upgrade link
â€¢ Sign out

âœ… STEP 4: ROUTING ON LOGIN

After login:

guest â†’ route to /vault

pro â†’ route to /dashboard

admin â†’ route to /command

âœ… STEP 5: FEATURE GATING WITH UI FEEDBACK

If a non-authorized user visits:

Veritas Seal

Create Capsule

DAO

Truth Bounty
â†’ Show lock icon, tooltip, and CTA modal to upgrade tier (links to Stripe page or unlock flow)

âœ… STEP 6: CLEANUP & TECH DEBT REMOVAL

Delete /login-modal.tsx, /start.tsx, duplicate profile/settings components

Collapse all role check logic into one module: utils/roleCheck.ts

Remove unused imports of Supabase or external auth providers if they exist

Audit entire /components and /pages for redundant entry points or unlinked logic

âœ… RESULT:

âœ… ONE login page

âœ… ONE profile access path

âœ… Role-based dashboard routing

âœ… All features match tier with locked UI where appropriate

âœ… Zero duplicate routes or dead pages

âœ… Enterprise-grade UX matching Replitâ€™s best practices

ğŸ“¦ BONUS: Store user tier securely in Replit's Secrets or .env for internal tier logic

yaml
Copy
Edit

---

### ğŸ’¡ Want Me to Build You These?
I can generate:
1. `auth/routeGuard.ts` (for role checking before page load)
2. `components/AuthGate.tsx` (protects any component by tier)
3. A new `login.tsx` with full Replit Auth logic and tier routing

Would you like me to start building these right now?