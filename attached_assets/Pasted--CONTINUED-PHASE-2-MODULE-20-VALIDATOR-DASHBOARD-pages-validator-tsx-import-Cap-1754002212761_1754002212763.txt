// === CONTINUED: PHASE 2 ‚Äî MODULE 20: VALIDATOR DASHBOARD ===

// pages/validator.tsx
import CapsuleInbox from '../components/CapsuleInbox';
import NodeLogStream from '../components/NodeLogStream';

export default function ValidatorDashboard() {
  return (
    <div className="p-6 space-y-6">
      <h1 className="text-3xl font-bold">üõ° Validator Control Panel</h1>
      <CapsuleInbox />
      <NodeLogStream />
    </div>
  );
}

// === MODULE 21 ‚Äì CAPSULE QUEUE PERFORMANCE METRICS ===

// components/QueueStats.tsx
"use client";
import { useEffect, useState } from 'react';

export default function QueueStats() {
  const [stats, setStats] = useState({ total: 0, verified: 0, pending: 0 });

  useEffect(() => {
    fetch('/api/queue/stats')
      .then((res) => res.json())
      .then(setStats);
  }, []);

  return (
    <div className="bg-white p-4 shadow rounded">
      <h2 className="text-lg font-bold">üìà Capsule Queue Stats</h2>
      <ul className="text-sm mt-2 space-y-1">
        <li>üì¶ Total Capsules: {stats.total}</li>
        <li>‚úÖ Verified: {stats.verified}</li>
        <li>‚è≥ Pending: {stats.pending}</li>
      </ul>
    </div>
  );
}

// === MODULE 22 ‚Äì EMOTIONAL AI CURATION PREVIEW ===

// lib/ai/EmotionClassifier.ts
export async function classifyEmotion(text) {
  const res = await fetch('https://api.guardianchain.ai/emotion', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
      Authorization: `Bearer ${process.env.GUARDIAN_AI_API}`,
    },
    body: JSON.stringify({ text })
  });
  const data = await res.json();
  return data.label; // e.g. "grief", "resilience", "anger", etc.
}

// Use in Capsule Submission:
const emotion = await classifyEmotion(form.text);
setMetadata((prev) => ({ ...prev, emotion }))

// === DASHBOARD VIEW EXAMPLE ===
// pages/dashboard.tsx
import QueueStats from '../components/QueueStats';

<div className="space-y-6">
  <QueueStats />
  <YieldClaim availableYield={yieldTotal} />
  <ReplayJournal entries={journal} />
</div>

// ‚úÖ MODULES COMPLETE
// - Validator dashboard centralizes tools
// - Real-time capsule queue stats revealed
// - EmotionClassifier unlocks human sentiment tags
// GuardianChain is now validator-ready, emotionally indexed, and enterprise capable.
